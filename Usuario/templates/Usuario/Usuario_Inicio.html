{% load static %}

<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Usuario (Inicio)</title>
  <link rel="stylesheet" href="{% static 'styles/Usuario/Styles_Usuario_Inicio.css' %}">
</head>
<body>
  <div class="app">

    <!-- ================================
        Header fijo (Buscador)
        ================================ -->
    <!-- Header fijo -->
    <header class="header">
      <div class="search-pill">
        <a href="{% url 'Usuario_Inicio' %}">
          <button class="icon-btn home-btn" 
                  aria-label="Inicio" 
                  title="Inicio"></button>
        </a>
        
        <div class="pill-separator"></div>
        <div class="search">
          <span class="search-icon"></span>
          <input type="text"
                id="searchInput"
                placeholder="¬øQu√© quieres reproducir?"
          />
        </div>
        <div class="pill-separator"></div>
        <a href="{% url 'Usuario_Generos' %}">
        <button class="icon-btn action-btn"     aria-label="G√©neros" title="G√©neros"></button>
        </a>
    <!-- Bot√≥n Artista (nuevo) -->
    <a href="{% url 'Usuario_Artistas' %}">
      <button class="icon-btn artist-btn" aria-label="Artista" title="Artista"></button>
    </a>
      </div>
      <!-- dentro de tu <main> o donde quieras mostrar el icono de usuario -->
<div class="info-container">
  <button class="info-btn" onclick="toggleMenu()">üê¥</button>
  <div class="dropdown-menu" id="dropdownMenu">
    <a href="{% url 'Usuario_Configuracion' %}" class="dropdown-item">
      Configuraci√≥n de la cuenta
    </a>
    <!-- bot√≥n de cerrar sesi√≥n -->
    <a href="{% url 'login' %}" class="dropdown-item">
      Cerrar sesi√≥n
    </a>
  </div>
</div>

    </header>
    <!-- Fin Header fijo -->

    <!-- ================================
        Sidebar fijo (Navegaci√≥n lateral)
        ================================ -->
    <!-- Sidebar fijo -->
    <aside class="sidebar">
      <!-- Biblioteca (imagen + texto) -->
      <div class="sidebar-library">
        <span class="biblioteca-icon"></span>
        <span class="sidebar-text">Biblioteca</span>
      </div>
    
      <hr class="sidebar-divider">
    
      <!-- Tus me gusta -->
      <button class="playlist-item favorite-item">
        <span class="favorite-icon"></span>
        <a href=""></a>
        <span class="playlist-label">Tus me gusta</span>
      </button>
    
      <!-- Playlists din√°micas -->
      <div id="playlist-list" class="sidebar-playlists">
        <!-- Aqu√≠ se ir√°n insertando las playlists -->
         {% for playlist in playlists %}
      <!-- aqu√≠ tus enlaces o botones generados -->
        {% endfor %}

      </div>
    
      <!-- Bot√≥n fijo abajo -->
      <button id="btn-new-playlist" class="sidebar-action">
        <span class="action-icon"></span>
        <span class="action-label">Crear playlist</span>
      </button>
    
      <!-- Formulario para crear nueva playlist -->
      <form
        id="new-playlist-form"
        class="new-playlist-entry hidden"
        method="POST"
      >
        {% csrf_token %}
        <input
          type="text"
          name="name"

          id="new-song-name"
          placeholder="Nombre de la canci√≥n"
          required
        >
        <button type="submit" class="playlist-save-btn">
          Guardar
        </button>
      </form>
    </aside>
    
    <!-- Fin Sidebar fijo -->
        
    <!-- ================================
        Contenido principal desplazable (Editable)
        ================================ -->
    <!-- Contenido principal desplazable -->
    <main class="main-content">

      <!-- Secci√≥n: Escuchado recientemente -->
      <!-- Secci√≥n: Escuchado recientemente -->
      <section class="carousel-section">
  <h2 class="section-title">Escuchado recientemente</h2>
  <div class="carousel-wrapper">
    <button class="arrow left" aria-label="Anterior"></button>

    <div class="carousel">
      {% for cancion in canciones_recientes %}
        <div class="card">
          <div class="card-item">
            <a href="{% url 'Usuario_Sencillo' cancion.id_cancion_id %}">
              <button class="card-btn" onclick="playSong('{{ cancion.id }}')">
                <img src="{{ cancion.id_cancion.portada.url }}" alt="{{ cancion.id_cancion.nombre }}">
              </button>
            </a>
            <div class="card-info">
              <div class="card-title">{{ cancion.id_cancion.nombre }}</div>
              <div class="card-subtitle">{{ cancion.id_cancion.id_usuario.nombre }}</div>
            </div>
          </div>
        </div>
      {% empty %}
        <p class="no-recent">No hay reproducciones recientes.</p>
      {% endfor %}
    </div>

    <button class="arrow right" aria-label="Siguiente"></button>
  </div>
</section>


    
      <!-- Secci√≥n: Creado para ti‚Ä¶ -->
      <section class="carousel-section">
        <h2 class="section-title">Creado para ti‚Ä¶</h2>
        <div class="carousel-wrapper">
          <button class="arrow left" aria-label="Anterior"></button>
          <div class="carousel">
            {% for genero in seleccion %}
              <div class="card">
                <div class="card-item">
                  <a href="{% url 'Usuario_Genero' genero.id %}">
                  <button class="card-btn" onclick="playSong('{{ cancion.id }}')">
                    <img src="{{ genero.portada.url }}" alt="{{ genero.portada  }}">
                  </button>
                  </a>
                  <div class="card-info">
                    <div class="card-title">{{ genero.nombre }}</div>
                    <div class="card-subtitle"></div>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
          <button class="arrow right" aria-label="Siguiente"></button>
        </div>
      </section>
    
      <!-- Secci√≥n: Sencillos -->
      <section class="carousel-section">
        <!-- Filtro en tiempo real -->

        <h2 class="section-title">Sencillos</h2>
        <div class="carousel-wrapper">
          <button class="arrow left" aria-label="Anterior"></button>
          <div class="carousel">
            {% for cancion in canciones_aleatoreas %}
              <div class="card">
                <div class="card-item">
                  <a href="{% url 'Usuario_Sencillo' cancion.id %}">
                  <button class="card-btn" onclick="playSong('{{ cancion.id }}')">
                    <img src="{{ cancion.portada.url }}" alt="{{ cancion.nombre }}">
                  </button>
                  </a>
                  <div class="card-info">
                    <div class="card-title">{{ cancion.nombre }}</div>
                    <div class="card-subtitle">{{ cancion.id_usuario }}</div>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
          <button class="arrow right" aria-label="Siguiente"></button>
        </div>
      </section>
    
      <!-- Secci√≥n: Albums -->
      <section class="carousel-section">
        <h2 class="section-title">Albums</h2>
        <div class="carousel-wrapper">
          <button class="arrow left" aria-label="Anterior"></button>
          <div class="carousel">
            {% for cancion in albums %}
              <div class="card">
                <div class="card-item">
                  <a href="{% url 'Usuario_Album' cancion.id %}">
                  <button class="card-btn" onclick="playSong('{{ cancion.id }}')">
                    <img src="{{ cancion.portada.url }}" alt="{{ cancion.portada  }}">
                  </button>
                  </a>
                  <div class="card-info">
                    <div class="card-title">{{ cancion.nombre }}</div>
                    <div class="card-subtitle">{{ cancion.id_usuario }}</div>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
          <button class="arrow right" aria-label="Siguiente"></button>
        </div>
      </section>
    
    </main>
    <!-- Fin Contenido principal desplazable -->

    <!-- ================================
        Reproductor fijo (Footer)
        ================================ -->
    <!-- Reproductor fijo -->
    <footer class="player">
      <audio class="audio-player"></audio>
      <div class="player-bottom">
        <div class="progress-wrapper">
          <div class="controls">
            <button class="control-btn aleatorio-btn"    aria-label="Aleatorio"  title="Aleatorio"></button>
            <button class="control-btn atras-btn"        aria-label="Anterior"   title="Anterior"></button>
            <button class="control-btn play-btn"         aria-label="Play/Pausa" title="Play/Pausa"></button>
            <button class="control-btn siguiente-btn"    aria-label="Siguiente"  title="Siguiente"></button>
          </div>
          <div class="progress-container">
            <span class="time current">0:00</span>
            <input type="range" class="progress" min="0" max="100" value="0">
            <span class="time total">{{ cancion.longitud }}</span>
          </div>
        </div>
        <div class="volume-container">
          <button class="volume-icon" aria-label="Volumen" title="Volumen"></button>
          <input type="range" class="volume-slider" min="0" max="100" value="100">
        </div>
        <div class="track-info-container">
          <div class="info">
            <span class="track-name">{{ cancion.nombre }}</span>
            <span class="artist-name">{{ cancion.artista.nombre }}</span>
          </div>
          <div class="album-art">
            <img src="{{ cancion.portada.url }}" alt="{{ cancion.portada }}">
          </div>
        </div>
      </div>
    </footer>
    <!-- Fin Reproductor fijo -->

  </div>

  <!-- ================================
      Scripts
      ================================ -->
  <!-- Scripts -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const searchInput = document.getElementById('searchInput');

    searchInput.addEventListener('input', () => {
      const filter = searchInput.value.trim().toLowerCase();

      const cards = document.querySelectorAll('.card');

      cards.forEach(card => {
        const title = card.querySelector('.card-title')?.textContent.toLowerCase() || "";
        const subtitle = card.querySelector('.card-subtitle')?.textContent.toLowerCase() || "";

        const matches = title.includes(filter) || subtitle.includes(filter);
        card.style.display = matches ? 'block' : 'none';
      });
    });
  });
  </script>
  <script src="../../static/js/volumen.js"></script>
  <script src="../../static/js/controles.js"></script>
  <script src="../../static/js/Crear_Playlist.js"></script>
  <script src="../../static/js/ScrollBar.js"></script>
  <script src="../../static/js/Artista_Salir.js"></script>



</body>
</html>


